import{r as y,j as e,L as K,S as R}from"./app-DdMad-KT.js";import{B as d}from"./button-CYOGhVcX.js";import{C as _,a as q}from"./card-DHkDNwnL.js";import{T as J,a as Q,b as W,c as n}from"./tabs-bfcL9vLq.js";import{A as X}from"./app-layout-DCHZ-1J0.js";import{useDescriptionForm as Y}from"./useDescriptionForm-Bb44Lm0b.js";import Z from"./AmenitiesStep-BEI1lgDM.js";import $ from"./DescriptionStep-DJlZF8c0.js";import ee from"./DetailStep-rQiO_iNi.js";import se from"./LocationStep-D1GmCWVE.js";import te from"./MediaStep-g8IM2PYA.js";import"./utils-jAU0Cazi.js";import"./index-DQ38d7fJ.js";import"./index-C4geMRf5.js";import"./index-BBaBEGfr.js";import"./createLucideIcon-DcM5d6U4.js";import"./app-logo-icon-CVxATI99.js";import"./checkbox-BYLnsbv5.js";import"./index-Cazmoa3F.js";import"./label-Cble8PyE.js";import"./input-uQZ3ep-X.js";import"./use-server-handoff-complete-CnVlYcRJ.js";import"./select-Bf6H0WpH.js";import"./textarea-DetrahX_.js";const t=["description","media","location","detail","amenities"];function Oe({venues:b,events:C,editEvent:r}){const[o,l]=y.useState("description"),{selectedVenueTypes:p,setSelectedVenueTypes:N,selectedEventTypes:m,setSelectedEventTypes:T,openingHours:u,setOpeningHours:w,title:x,setTitle:O,description:f,setDescription:A,numOfGuests:h,setNumOfGuests:D,size:j,setSize:L,unitOfMeasure:g,setUnitOfMeasure:k,handleVenueChange:E,handleEventChange:H,handleTimeChange:V,handleCheckboxChange:F}=Y(r),I=()=>{const s=t.indexOf(o);s<t.length-1&&l(t[s+1])},M=()=>{const s=t.indexOf(o);s>0&&l(t[s-1])},P=s=>{const a=[];return Object.entries({monToFri:["monday","tuesday","wednesday","thursday","friday"],saturday:["saturday"],sunday:["sunday"]}).forEach(([c,G])=>{const i=s[c];i&&G.forEach(U=>{a.push({day:U,open:i.open||null,close:i.close||null,is_closed:i.isClosed??!1})})}),a},[v,S]=y.useState(!1),z=()=>{S(!0);const s={title:x,description:f,selectedVenueTypes:p,selectedEventTypes:m,numOfGuests:h,size:j,unitOfMeasure:g,openingHours:P(u),status:"draft"},a=r?"events-update":"events-store";R[r?"put":"post"](route(a,r==null?void 0:r.id),s,{preserveScroll:!0,onFinish:()=>S(!1),onSuccess:()=>alert("Event saved!"),onError:c=>console.error("Error saving:",c)})};return e.jsxs(X,{children:[e.jsx(K,{title:"Add New "}),e.jsxs("div",{className:"mx-auto w-full p-5 lg:w-[80%]",children:[e.jsx("h2",{className:"mb-4 text-center text-2xl font-bold",children:"Add New Event"}),e.jsxs(J,{value:o,onValueChange:l,className:"w-full",children:[e.jsx("div",{className:"flex justify-center overflow-x-auto",children:e.jsx(Q,{className:"mb-2 inline-flex min-w-max gap-2 px-2 md:grid md:grid-cols-3 lg:grid-cols-5 lg:gap-16",children:t.map((s,a)=>e.jsxs(W,{value:s,className:"whitespace-nowrap",children:[a+1,". ",s.charAt(0).toUpperCase()+s.slice(1)]},s))})}),e.jsxs(_,{className:"w-full",children:[e.jsxs(q,{className:"flex-1 space-y-4 overflow-y-auto border-b-1 pt-3 pb-6",children:[e.jsx(n,{value:"description",children:e.jsx($,{venues:b,events:C,selectedVenueTypes:p,setSelectedVenueTypes:N,selectedEventTypes:m,setSelectedEventTypes:T,openingHours:u,setOpeningHours:w,title:x,setTitle:O,description:f,setDescription:A,numOfGuests:h,setNumOfGuests:D,size:j,setSize:L,unitOfMeasure:g,setUnitOfMeasure:k,handleVenueChange:E,handleEventChange:H,handleTimeChange:V,handleCheckboxChange:F})}),e.jsx(n,{value:"media",children:e.jsx(te,{})}),e.jsx(n,{value:"location",children:e.jsx(se,{})}),e.jsx(n,{value:"detail",children:e.jsx(ee,{})}),e.jsx(n,{value:"amenities",children:e.jsx(Z,{})})]}),e.jsxs("div",{className:"flex justify-between px-6 pb-3",children:[e.jsx(d,{variant:"outline",onClick:M,disabled:o===t[0],children:"Previous"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(d,{variant:"secondary",onClick:z,disabled:v,children:v?"Saving...":"Save Draft"}),e.jsx(d,{onClick:I,disabled:o===t[t.length-1],children:"Next"})]})]})]})]})]})]})}export{Oe as default};
